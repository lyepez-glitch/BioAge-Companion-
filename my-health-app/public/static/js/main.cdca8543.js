(()=>{"use strict";var e={7565:(e,t,n)=>{var o=n(501),a=n(6665),r=n(1943),i=n(5620),l=n(918),s=n(9429),c=n(9762),u=n(669),d=n(2793),g=n(9454);const f=(0,n(4291).setContext)((async(e,{headers:t})=>{const n=await g.default.getItem("token");return console.log("Token from AsyncStorage:",n),{headers:Object.assign({},t,{Authorization:n?`Bearer ${n}`:""})}})),m=new s.ApolloLink(((e,t)=>t(e).map((n=>(n.errors&&n.errors.some((e=>"Authentication required"===e.message))&&g.default.getItem("refreshToken").then((async n=>{if(console.log("refresh token",n),n){const o=await n(n);return console.log("New Access Token:",o),await g.default.setItem("token",o),console.log("Updated token in AsyncStorage:",o),e.setContext({headers:{Authorization:`Bearer ${o}`}}),t(e)}})),n))))),h=async()=>{const e=s.ApolloLink.from([f,m,new c.HttpLink({uri:"https://bioage-companion.onrender.com/api/graphql/"})]);return new u.ApolloClient({link:e,cache:new d.InMemoryCache})};var p=n(5748),y=n(4504),x=n(378),j=n(5482),b=n(1487),v=n(9741),S=n(7109),w=n(397);function T({navigation:e}){const[t,n]=(0,a.useState)(""),[o,r]=(0,a.useState)(""),[i,l]=(0,a.useState)("");return(0,w.jsxs)(y.default,{style:A.container,children:[(0,w.jsx)(v.default,{label:"Username",value:t,onChangeText:n,style:A.input}),(0,w.jsx)(v.default,{label:"Password",value:o,onChangeText:r,secureTextEntry:!0,style:A.input}),i?(0,w.jsx)(j.default,{style:A.error,children:i}):null,(0,w.jsx)(x.default,{title:"Login",labelStyle:{color:"white"},style:A.button,onPress:async()=>{try{const n=await S.default.post("https://bioage-companion.onrender.com/api/token/",{username:t,password:o});localStorage.setItem("token",n.data.access),g.default.setItem("token",n.data.access),l(""),e.navigate("ProfileSetup")}catch(n){console.log("err",n),l("Invalid username or password")}},children:"Login"})]})}const A=b.default.create({container:{flex:1,justifyContent:"center",padding:16,alignItems:"center"},error:{color:"red",marginBottom:12,textAlign:"center"},input:{width:"60%",marginBottom:12,fontSize:14,paddingVertical:8},button:{width:"60%",marginBottom:10}});var O=n(176);function k({navigation:e}){const[t,n]=(0,a.useState)(""),[o,r]=(0,a.useState)(""),[i,l]=(0,a.useState)(""),[s,c]=(0,a.useState)(""),[u,d]=(0,a.useState)("");return(0,w.jsxs)(y.default,{style:C.container,children:[(0,w.jsx)(j.default,{style:C.heading,children:"Register"}),(0,w.jsx)(v.default,{label:"Username",value:t,onChangeText:n,style:C.input}),(0,w.jsx)(v.default,{label:"Email",value:o,onChangeText:r,style:C.input}),(0,w.jsx)(v.default,{label:"Password",secureTextEntry:!0,value:i,onChangeText:l,style:C.input}),s?(0,w.jsx)(j.default,{style:C.error,children:s}):null,u?(0,w.jsx)(j.default,{style:C.success,children:u}):null,(0,w.jsx)(O.default,{mode:"contained",onPress:async()=>{try{await S.default.post("https://bioage-companion.onrender.com/api/register/",{username:t,email:o,password:i});d("User created successfully"),c("")}catch(e){c("Error creating user")}},style:C.button,children:"Register"}),(0,w.jsx)(O.default,{onPress:()=>e.navigate("Login"),style:C.button,children:"Login"})]})}const C=b.default.create({container:{flex:1,justifyContent:"center",padding:20},input:{marginBottom:10,width:"70%",alignSelf:"center"},error:{color:"red",marginBottom:12,textAlign:"center"},success:{color:"green",marginBottom:12,textAlign:"center"},button:{marginTop:10,alignSelf:"center",width:"70%"},heading:{textAlign:"center",fontSize:24,fontWeight:"bold",marginBottom:20}});function B({navigation:e}){const[t,n]=(0,a.useState)(""),[o,r]=(0,a.useState)(""),[i,l]=(0,a.useState)("");return(0,w.jsxs)(y.default,{style:P.container,children:[(0,w.jsx)(j.default,{style:P.header,children:"Enter your Profile Details"}),(0,w.jsx)(v.default,{label:"Age",keyboardType:"numeric",value:t,onChangeText:n,style:P.input}),(0,w.jsx)(v.default,{label:"Weight (kg)",keyboardType:"numeric",value:o,onChangeText:r,style:P.input}),(0,w.jsx)(v.default,{label:"Height",value:i,onChangeText:l,style:P.input}),(0,w.jsx)(O.default,{mode:"contained",onPress:async()=>{const t=localStorage.getItem("token");fetch("https://bioage-companion.onrender.com/api/profile-setup/",{method:"POST",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"},body:JSON.stringify({height:180,weight:75})}).then((e=>e.json())).then((e=>{console.log("response",e)})),e.navigate("HealthMetrics")},style:P.button,children:"Next"})]})}const P=b.default.create({container:{flex:1,justifyContent:"center",padding:20},header:{fontSize:24,marginBottom:20,textAlign:"center",fontWeight:"bold"},input:{marginBottom:10,width:"70%",alignSelf:"center"},button:{marginTop:20,width:"70%",alignSelf:"center"}});var R=n(3431),L=n(9538);const z=L.default`
  mutation UpdateHealthMetrics($restingHeartRate: Float!, $hoursOfSleep: Float!, $dailyActivityLevel: Float!) {
    updateHealthMetrics(
      restingHeartRate: $restingHeartRate
      hoursOfSleep: $hoursOfSleep
      dailyActivityLevel: $dailyActivityLevel
    ) {
      success
    }
  }
`;function H({navigation:e}){const[t,n]=(0,a.useState)(""),[o,r]=(0,a.useState)(""),[i,l]=(0,a.useState)(""),[s,{data:c,loading:u,error:d}]=(0,R.useMutation)(z);return(0,w.jsxs)(y.default,{style:I.container,children:[(0,w.jsx)(x.default,{style:I.button,title:"See Biological Age",color:"blue",onPress:()=>e.navigate("BiologicalAge")}),(0,w.jsx)(v.default,{label:"Resting Heart Rate",value:t,onChangeText:n,keyboardType:"numeric",style:I.input,mode:"outlined"}),(0,w.jsx)(v.default,{label:"Hours of Sleep",value:o,onChangeText:r,keyboardType:"numeric",style:I.input,mode:"outlined"}),(0,w.jsx)(v.default,{label:"Activity Level (1-10)",value:i,onChangeText:l,keyboardType:"numeric",style:I.input,mode:"outlined"}),(0,w.jsx)(x.default,{style:I.button,title:"Next",color:"blue",onPress:()=>{s({variables:{restingHeartRate:parseFloat(t),hoursOfSleep:parseFloat(o),dailyActivityLevel:parseFloat(i)}})}}),u&&(0,w.jsx)(p.default,{style:I.loading,children:"Loading..."}),d&&(0,w.jsxs)(p.default,{style:I.error,children:["Error: ",d.message]})]})}const I=b.default.create({container:{flex:1,justifyContent:"center",alignItems:"center",padding:20},input:{marginBottom:15,width:"70%"},button:{marginTop:15,width:"70%"},loading:{marginTop:10,textAlign:"center",fontSize:16},error:{marginTop:10,textAlign:"center",fontSize:16,color:"red"}});function E({navigation:e}){const[t,n]=(0,a.useState)(null);return(0,a.useEffect)((()=>{const e=localStorage.getItem("token");fetch("https://bioage-companion.onrender.com/api/biological-age/",{method:"POST",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>n(e.biological_age)))}),[]),(0,w.jsxs)(y.default,{style:_.container,children:[(0,w.jsxs)(j.default,{style:_.heading,children:["Your Biological Age is: ",t]}),(0,w.jsx)(x.default,{title:"See Recommendations",onPress:()=>e.navigate("Recommendations"),style:_.button})]})}const _=b.default.create({container:{flex:1,justifyContent:"center",padding:20,alignItems:"center"},heading:{fontSize:24,marginBottom:20,textAlign:"center"},button:{width:"70%",marginTop:20,marginBottom:20}});var M=n(9997),N=n(9215),$=n(9063);const F=L.default`
  query GetRecommendations {
    recommendations {
      id
      recommendationText
    }
  }
`;function U(){const{loading:e,error:t,data:n}=(0,M.useQuery)(F);return e?(0,w.jsx)(N.default,{animating:!0,size:"large"}):t?(0,w.jsxs)(j.default,{children:["Error: ",t.message]}):(0,w.jsxs)(y.default,{style:W.container,children:[(0,w.jsx)(j.default,{style:W.header,children:"Personalized Recommendations:"}),n.recommendations.map((e=>(0,w.jsx)($.default,{style:W.card,children:(0,w.jsx)($.default.Content,{children:(0,w.jsx)(j.default,{children:e.recommendationText})})},e.id)))]})}const W=b.default.create({container:{flex:1,padding:20},header:{fontSize:24,fontWeight:"bold",marginBottom:10},card:{marginBottom:10,padding:10},input:{marginBottom:10,width:"80%"},button:{marginTop:20,width:"80%"}}),q=(0,i.createNativeStackNavigator)();(0,o.default)((function(){const[e,t]=a.useState(null);return a.useEffect((()=>{(async()=>{const e=await h();t(e)})()}),[]),e?(0,w.jsx)(l.ApolloProvider,{client:e,children:(0,w.jsx)(r.NavigationContainer,{children:(0,w.jsxs)(q.Navigator,{initialRouteName:"Register",children:[(0,w.jsx)(q.Screen,{name:"Login",component:T}),(0,w.jsx)(q.Screen,{name:"Register",component:k}),(0,w.jsx)(q.Screen,{name:"ProfileSetup",component:B}),(0,w.jsx)(q.Screen,{name:"HealthMetrics",component:H}),(0,w.jsx)(q.Screen,{name:"BiologicalAge",component:E}),(0,w.jsx)(q.Screen,{name:"Recommendations",component:U})]})})}):(0,w.jsx)(p.default,{children:"Loading Apollo Client..."})}))}},t={};function n(o){var a=t[o];if(void 0!==a)return a.exports;var r=t[o]={exports:{}};return e[o].call(r.exports,r,r.exports,n),r.exports}n.m=e,(()=>{var e=[];n.O=(t,o,a,r)=>{if(!o){var i=1/0;for(u=0;u<e.length;u++){for(var[o,a,r]=e[u],l=!0,s=0;s<o.length;s++)(!1&r||i>=r)&&Object.keys(n.O).every((e=>n.O[e](o[s])))?o.splice(s--,1):(l=!1,r<i&&(i=r));if(l){e.splice(u--,1);var c=a();void 0!==c&&(t=c)}}return t}r=r||0;for(var u=e.length;u>0&&e[u-1][2]>r;u--)e[u]=e[u-1];e[u]=[o,a,r]}})(),n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(o,a){if(1&a&&(o=this(o)),8&a)return o;if("object"===typeof o&&o){if(4&a&&o.__esModule)return o;if(16&a&&"function"===typeof o.then)return o}var r=Object.create(null);n.r(r);var i={};e=e||[null,t({}),t([]),t(t)];for(var l=2&a&&o;"object"==typeof l&&!~e.indexOf(l);l=t(l))Object.getOwnPropertyNames(l).forEach((e=>i[e]=()=>o[e]));return i.default=()=>o,n.d(r,i),r}})(),n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e={792:0};n.O.j=t=>0===e[t];var t=(t,o)=>{var a,r,[i,l,s]=o,c=0;if(i.some((t=>0!==e[t]))){for(a in l)n.o(l,a)&&(n.m[a]=l[a]);if(s)var u=s(n)}for(t&&t(o);c<i.length;c++)r=i[c],n.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return n.O(u)},o=self.webpackChunkweb=self.webpackChunkweb||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))})();var o=n.O(void 0,[225],(()=>n(7565)));o=n.O(o)})();
//# sourceMappingURL=main.cdca8543.js.map